plugins {
    id 'antlr'
    id 'java'
    id 'org.jetbrains.intellij' version '0.6.5'
}

group 'cn.xiaoheiban'
version '1.0.0'

repositories {
    mavenCentral()
}

compileJava {
    sourceCompatibility = '1.8'
    targetCompatibility = '1.8'
}

dependencies {
    antlr("org.antlr:antlr4:$antlr4Version") { // use ANTLR version 4
        exclude group: 'com.ibm.icu', module: 'icu4j'
    }
    compile fileTree(dir:'libs',include:['*.jar'])
    testCompile group: 'junit', name: 'junit', version: '4.12'
}

// See https://github.com/JetBrains/gradle-intellij-plugin/
intellij {
    version = '2021.3.2'
    pluginName = 'Goctl'
    downloadSources true
    updateSinceUntilBuild false
}

patchPluginXml {
    sinceBuild '193.0'
    changeNotes """
    <h1># 2022-01-20(1.0.0)</h1>
    <ul>
        <li>Add completion keys</li>
        <li>Support to go to declaration cross files</li>
    </ul>
    <h1># 2021-11-25(v0.7.18)</h1>
    <ul>
        <li>Fix duplicate routes error if there declared 'prefix' </li>
    </ul>
    
    <h1># 2021-10-22(v0.7.17)</h1>
    <ul>
        <li>Syntax support root path</li>
    </ul>
    
    <h1># 2021-10-05(v0.7.16)</h1>
    <ul>
        <li>Fixed goctl not found</li>
    </ul>
    """
}